(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6120],{20068:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/ideas",function(){return t(47744)}])},47744:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>b});var s=t(74848),l=t(96540),n=t(59580),i=t(71884),r=t(45904),o=t(32251),c=t(58768);function d(e){let{options:a,value:t,onChange:l,placeholder:n}=e;return(0,s.jsx)(c.WF,{value:t,onChange:l,multiple:!0,children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.WF.Button,{className:"w-full bg-[#1a1a1a] text-white p-2 rounded text-left",children:t.length>0?t.join(", "):n}),(0,s.jsx)(c.WF.Options,{className:"absolute z-10 w-full mt-1 bg-[#242424] rounded shadow-lg max-h-60 overflow-auto",children:a.map(e=>(0,s.jsx)(c.WF.Option,{value:e,className:e=>{let{active:a,selected:t}=e;return"p-2 cursor-pointer ".concat(a?"bg-blue-500":""," ").concat(t?"bg-blue-700":"")},children:e},e))})]})})}var u=t(86297),h=t(51657);function m(e){let{onClose:a,onPost:t,previewImage:n,categories:i,markets:r,tools:o}=e,[c,m]=(0,l.useState)(""),[x,g]=(0,l.useState)(""),[p,v]=(0,l.useState)([]),[w,j]=(0,l.useState)(""),[b,f]=(0,l.useState)([]),[N,y]=(0,l.useState)(!1),C=async e=>{e.preventDefault(),c&&x&&w&&(await t({title:c,description:x,categories:p,market:w,tools:b}),y(!0),setTimeout(()=>{a()},2e3))};return(0,s.jsxs)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:[(0,s.jsx)(u.N,{children:N&&(0,s.jsx)(h.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0},className:"absolute top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg",children:"Post published successfully!"})}),(0,s.jsxs)("div",{className:"bg-[#242424] p-6 rounded-lg w-[800px] max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Share Trading Idea"}),n&&(0,s.jsx)("div",{className:"mb-4 rounded overflow-hidden",children:(0,s.jsx)("img",{src:n,alt:"Chart Preview",className:"w-full"})}),(0,s.jsxs)("form",{onSubmit:C,children:[(0,s.jsx)("input",{type:"text",placeholder:"Title",className:"w-full bg-[#1a1a1a] text-white p-2 rounded mb-4",value:c,onChange:e=>m(e.target.value)}),(0,s.jsx)("textarea",{placeholder:"Description",className:"w-full bg-[#1a1a1a] text-white p-2 rounded mb-4 h-32",value:x,onChange:e=>g(e.target.value)}),(0,s.jsx)(d,{options:i,value:p,onChange:v,placeholder:"Select Categories"}),(0,s.jsxs)("select",{value:w,onChange:e=>j(e.target.value),className:"w-full bg-[#1a1a1a] text-white p-2 rounded my-4",children:[(0,s.jsx)("option",{value:"",children:"Select Market"}),r.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsx)(d,{options:[...o.technical,...o.fundamental],value:b,onChange:f,placeholder:"Select Trading Tools"}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 mt-4",children:[(0,s.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 rounded bg-gray-600 text-white",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 rounded bg-blue-500 text-white",children:"Post Idea"})]})]})]})]})}var x=t(20354),g=t.n(x);t(17537);let p=["Technical Analysis","Fundamental Analysis","Price Action","Pattern Trading","Swing Trading","Day Trading"],v=["Crypto","Forex","Stocks","Commodities","Indices"],w={technical:["RSI","MACD","Moving Averages","Bollinger Bands","Fibonacci"],fundamental:["News Analysis","Economic Calendar","Financial Statements","Market Sentiment"]};function j(e){var a;let{idea:t}=e;return(0,s.jsxs)("div",{className:"bg-[#242424] rounded-lg overflow-hidden shadow-lg",children:[(0,s.jsx)("img",{src:t.chartImage,alt:"Chart",className:"w-full h-48 object-cover"}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)("img",{src:t.author.avatar||"/default-avatar.png",alt:t.author.name,className:"w-8 h-8 rounded-full"}),(0,s.jsx)("span",{className:"text-white",children:t.author.name})]}),(0,s.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:t.title}),(0,s.jsx)("p",{className:"text-gray-300",children:t.description}),(0,s.jsx)("div",{className:"mt-4 flex flex-wrap gap-2",children:null===(a=t.categories)||void 0===a?void 0:a.map((e,a)=>(0,s.jsx)("span",{className:"bg-blue-500/20 text-blue-400 text-sm px-2 py-1 rounded",children:e},a))}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("span",{className:"text-gray-400 text-sm",children:t.createdAt.toDate().toLocaleDateString()})})]})]})}function b(){let[e,a]=(0,l.useState)([]),[t,c]=(0,l.useState)(""),[u,h]=(0,l.useState)({categories:[],market:"",tools:[]}),[x,b]=(0,l.useState)(!1),{user:f}=(0,o.A)(),[N,y]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=(0,i.rJ)(n.db,"ideas"),t=(0,i.P)(e,(0,i.My)("createdAt","desc")),s=(0,i.aQ)(t,e=>{let t=e.docs.map(e=>({id:e.id,...e.data()}));console.log("Fetched ideas:",t),a(t)});return()=>s()},[]);let C=async()=>{let e=document.querySelector("#tradingview_chart");return e?(await g()(e)).toDataURL("image/png"):null},k=async()=>{let e=await C();e&&(y(e),b(!0))},S=e.filter(e=>{var a;let s=e.title.toLowerCase().includes(t.toLowerCase())||e.description.toLowerCase().includes(t.toLowerCase()),l=0===u.categories.length||(null===(a=e.categories)||void 0===a?void 0:a.some(e=>u.categories.includes(e))),n=!u.market||e.market===u.market;return s&&l&&n});return(0,s.jsxs)("div",{className:"min-h-screen bg-[#1a1a1a] p-6",children:[(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,s.jsx)("input",{type:"text",placeholder:"Search ideas...",className:"w-full bg-[#242424] text-white p-3 rounded",value:t,onChange:e=>c(e.target.value)}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(d,{options:p,value:u.categories,onChange:e=>h(a=>({...a,categories:e})),placeholder:"Filter by Categories"}),(0,s.jsxs)("select",{value:u.market,onChange:e=>h(a=>({...a,market:e.target.value})),className:"bg-[#242424] text-white p-2 rounded",children:[(0,s.jsx)("option",{value:"",children:"All Markets"}),v.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]})]}),(0,s.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:S.map(e=>(0,s.jsx)(j,{idea:e},e.id))})]}),(0,s.jsxs)("button",{onClick:k,className:"fixed bottom-6 right-6 bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-full shadow-lg z-10 flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Post Idea"]}),x&&(0,s.jsx)(m,{onClose:()=>b(!1),onPost:async e=>{if(!f||!N)return;let a=(0,r.KR)(n.I,"charts/".concat(Date.now(),"-chart.png"));await (0,r.ls)(a,N,"data_url");let t=await (0,r.qk)(a);await (0,i.gS)((0,i.rJ)(n.db,"ideas"),{...e,chartImage:t,author:{id:f.uid,name:f.displayName,avatar:f.photoURL},createdAt:new Date,likes:0,comments:[]}),b(!1)},categories:p,markets:v,tools:w})]})}},17537:()=>{}},e=>{var a=a=>e(e.s=a);e.O(0,[7348,5864,4743,5993,7003,636,6593,8792],()=>a(20068)),_N_E=e.O()}]);